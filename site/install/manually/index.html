<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Manual Installation - IXP Manager Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Manual Installation";
    var mkdocs_page_input_path = "install/manually.md";
    var mkdocs_page_url = "/install/manually/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> IXP Manager Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Installation</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../automated-script/">Automated Script</a>
                </li>
                <li class="">
                    
    <a class="" href="../maint-mode/">Maintenance Mode</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Manual Installation</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#manual-installation">Manual Installation</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#requirements">Requirements</a></li>
        
            <li><a class="toctree-l4" href="#initial-setup-and-dependancies">Initial Setup and Dependancies</a></li>
        
            <li><a class="toctree-l4" href="#database-setup">Database Setup</a></li>
        
            <li><a class="toctree-l4" href="#file-permissions">File Permissions</a></li>
        
            <li><a class="toctree-l4" href="#setting-up-apache">Setting Up Apache</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#congratulations">Congratulations!</a></li>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../upgrading/">Upgrading</a>
                </li>
                <li class="">
                    
    <a class="" href="../runtime/">Runtime Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../next-steps/">Post-Install Steps</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">General Usage</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../usage/authentication/">Authentication</a>
                </li>
                <li class="">
                    
    <a class="" href="../../usage/contacts/">Contacts</a>
                </li>
                <li class="">
                    
    <a class="" href="../../usage/customers/">Customers / Members</a>
                </li>
                <li class="">
                    
    <a class="" href="../../usage/customer-notes/">Customer Notes</a>
                </li>
                <li class="">
                    
    <a class="" href="../../usage/customer-tags/">Customer Tags</a>
                </li>
                <li class="">
                    
    <a class="" href="../../usage/interfaces/">Customer Connections</a>
                </li>
                <li class="">
                    
    <a class="" href="../../usage/users/">Users</a>
                </li>
                <li class="">
                    
    <a class="" href="../../usage/switches/">Switches</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Features</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../features/api/">API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/as112/">AS112</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/console-servers/">Console Servers</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/cronjobs/">Cron Jobs</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/patch-panels/">Cross Connects</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/dns-arpa/">DNS / ARPA</a>
                </li>
                <li class="">
                    
    <a class="" href="../../grapher/introduction/">Grapher</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/helpdesk/">Helpdesk Integration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/irrdb/">IRRDB</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/ixf-export/">IX-F Member Export</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/looking-glass/">Looking Glass</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/layer2-addresses/">MAC Addresses</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/manrs/">MANRS</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/member-export/">Member Export</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/mailing-lists/">Mailing List Management</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/nagios/">Nagios</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/patch-panels/">Patch Panels</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/peering-manager/">Peering Manager</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/peering-matrix/">Peering Matrix</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/peeringdb/">PeeringDB</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/rir-objects/">RIR Objects</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/reseller/">Reseller Functionality</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/route-collectors/">Route Collectors</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/route-servers/">Route Servers</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/routers/">Router Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/rpki/">RPKI</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/skinning/">Skinning</a>
                </li>
                <li class="">
                    
    <a class="" href="../../grapher/smokeping/">Smokeping</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/static-content/">Static Content</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/tacacs/">TACACS</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Grapher</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../grapher/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../grapher/api/">API &amp; Permissions</a>
                </li>
                <li class="">
                    
    <a class="" href="../../grapher/mrtg/">Backend: MRTG</a>
                </li>
                <li class="">
                    
    <a class="" href="../../grapher/sflow/">Backend: sflow</a>
                </li>
                <li class="">
                    
    <a class="" href="../../grapher/smokeping/">Backend: Smokeping</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Sflow Support</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../features/sflow/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../features/sflow-p2p/">Peer-to-peer Graphs</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Development</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../dev/introduction/">Introduction</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/api/">API</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/authentication/">Authentication</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/ci/">Continuous Integration</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/cla/">Contributer License Agreement</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/docker/">Docker</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/docs/">Documentation</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/forms/">Forms</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/frontend-crud/">Frontend CRUD</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/grapher/">Grapher</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/helpders/">Helpers</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/looking-glass/">Looking Glass</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/release-procedure/">Release Procedure</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/telescope/">Telescope</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/users/">Users</a>
                </li>
                <li class="">
                    
    <a class="" href="../../dev/vagrant/">Vagrant</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">IXP Manager Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Installation &raquo;</li>
        
      
    
    <li>Manual Installation</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/inex/ixp-manager-docs-md/edit/master/docs/install/manually.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="manual-installation">Manual Installation<a class="headerlink" href="#manual-installation" title="Permanent link"></a></h1>
<h2 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link"></a></h2>
<p>IXP Manager tries to stay current in terms of technology. Typically, this means some element of framework refresh(es) every couple of years and other more incremental package upgrades with minor version upgrades. As well as the obvious reasons for this, there is also the requirement to prevent developer apathy - insisting on legacy frameworks and packages that have been EOL'd provides a major stumbling block for bringing on new developers and contributors.</p>
<p>The current requirements for the web application are:</p>
<ul>
<li>a Linux / BSD host.</li>
<li>MySQL version 5.7 or later.</li>
<li>Apache / Nginx / etc.</li>
<li>PHP &gt;= 7.3. <strong>Note that IXP Manager will not run on older versions of PHP.</strong></li>
<li>Memcached - optional but recommended.</li>
</ul>
<p>To complete the installation using the included config/scripts, you will also need to have installed git (<code>apt-get install git</code>) and a number of PHP extensions (see the example <code>apt-get install</code> below).</p>
<p>Regrettably the potential combinations of operating systems, versions of
same and then versions of PHP are too numerous to provide individual
support. As such, we recommend installing IXP Manager on Ubuntu LTS 18.04 and we officially support this platform.</p>
<p>In fact we provide a complete installation script for this - see <a href="../automated-script/">the automated installation page</a> for details. If you have any issues with the manual installation, the automated script should be your first reference to compare what you are doing to what we recommend.</p>
<p>For completeness, the IXP Manager installation script for Ubuntu 18.04 LTS installs:</p>
<div class="highlight"><pre><span></span>apt-get install -qy apache2 php7.3 php7.3-intl php-rrd php7.3-cgi php7.3-cli      <span class="se">\</span>
    php7.3-snmp php7.3-curl  php-memcached libapache2-mod-php7.3 mysql-server     <span class="se">\</span>
    mysql-client php7.3-mysql memcached snmp php7.3-mbstring php7.3-xml php7.3-gd <span class="se">\</span>
    php7.3-bcmath php-gettext bgpq3 php-memcache unzip php7.3-zip git php-yaml    <span class="se">\</span>
    php-ds libconfig-general-perl libnetaddr-ip-perl mrtg  libconfig-general-perl <span class="se">\</span>
    libnetaddr-ip-perl rrdtool librrds-perl curl
</pre></div>

<p>If you are using a different platform, you will need to replicate the above as appropriate for your chosen platform.</p>
<p>Note particularly that Ubuntu 18.04 does not ship with php 7.3 and you will need to add the following PPA for the above installation line to work:</p>
<div class="highlight"><pre><span></span>apt-get install -yq software-properties-common
add-apt-repository -y ppa:ondrej/php
apt-get update -q
</pre></div>

<h3 id="get-the-ixp-manager-source">Get the IXP Manager Source<a class="headerlink" href="#get-the-ixp-manager-source" title="Permanent link"></a></h3>
<p>The code for IXP Manager is maintained on GitHub and the canonical repository is <a href="https://github.com/inex/IXP-Manager">inex/IXP-Manager</a>.</p>
<p>Log into the server where you wish to install IXP Manager. Move to the directory where you wish to store the source (our examples use <code>/srv/ixpmanager</code> which we refer to as <code>$IXPROOT</code>). Note that it <strong>should not</strong> be checked out into any web exposed directory (e.g. do not checkout to <code>/var/www</code>).</p>
<div class="highlight"><pre><span></span><span class="nv">IXPROOT</span><span class="o">=</span>/srv/ixpmanager
<span class="nb">cd</span> /srv
git clone https://github.com/inex/IXP-Manager.git ixpmanager
<span class="nb">cd</span> <span class="nv">$IXPROOT</span>   <span class="c1"># /srv/ixpmanager</span>
git checkout master
chown -R www-data: bootstrap/cache storage
</pre></div>

<h3 id="install-composer">Install Composer<a class="headerlink" href="#install-composer" title="Permanent link"></a></h3>
<p>IXP Manager uses <a href="http://getcomposer.org/">Composer</a> to manage its PHP dependencies. First, download a copy of the composer.phar. Once you have the PHAR archive, you can either keep it in your local project directory or move to <code>/usr/local/bin</code> to use it globally on your system.</p>
<p>The installation script for Ubuntu 18.04 LTS installs these via:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$IXPROOT</span>
<span class="nv">EXPECTED_SIGNATURE</span><span class="o">=</span><span class="k">$(</span>wget https://composer.github.io/installer.sig -O - -q<span class="k">)</span>
php -r <span class="s2">&quot;copy(&#39;https://getcomposer.org/installer&#39;, &#39;composer-setup.php&#39;);&quot;</span>
<span class="nv">ACTUAL_SIGNATURE</span><span class="o">=</span><span class="k">$(</span>php -r <span class="s2">&quot;echo hash_file(&#39;SHA384&#39;, &#39;composer-setup.php&#39;);&quot;</span><span class="k">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$EXPECTED_SIGNATURE</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="nv">$ACTUAL_SIGNATURE</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    sudo -u www-data bash -c <span class="s2">&quot;HOME=</span><span class="nv">$IXPROOT</span><span class="s2"> &amp;&amp; cd </span><span class="nv">$IXPROOT</span><span class="s2"> &amp;&amp; php composer-setup.php --quiet&quot;</span>
    rm <span class="nv">$IXPROOT</span>/composer-setup.php
<span class="k">else</span>
    <span class="nb">echo</span> -e <span class="s2">&quot;\n\nERROR: Invalid installer signature for composer installation&quot;</span>
    rm <span class="nv">$IXPROOT</span>/composer-setup.php
    <span class="nb">exit</span> 1
<span class="k">fi</span>
</pre></div>

<h2 id="initial-setup-and-dependancies">Initial Setup and Dependancies<a class="headerlink" href="#initial-setup-and-dependancies" title="Permanent link"></a></h2>
<h3 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link"></a></h3>
<p>Install the required PHP libraries:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$IXPROOT</span>
php composer.phar install --no-dev --prefer-dist
cp .env.example .env
php artisan key:generate
</pre></div>

<h2 id="database-setup">Database Setup<a class="headerlink" href="#database-setup" title="Permanent link"></a></h2>
<p>Use whatever means you like to create a database and user for IXP Manager. For example:</p>
<div class="highlight"><pre><span></span><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="ss">`ixp`</span> <span class="k">CHARACTER</span> <span class="kt">SET</span> <span class="o">=</span> <span class="s1">&#39;utf8mb4&#39;</span> <span class="k">COLLATE</span> <span class="o">=</span> <span class="s1">&#39;utf8mb4_unicode_ci&#39;</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">ALL</span> <span class="k">ON</span> <span class="ss">`ixp`</span><span class="p">.</span><span class="o">*</span> <span class="k">TO</span> <span class="ss">`ixp`</span><span class="o">@</span><span class="ss">`localhost`</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">&#39;&lt;pick a password!&gt;&#39;</span><span class="p">;</span>
<span class="k">FLUSH</span> <span class="n">PRIVILEGES</span><span class="p">;</span>
</pre></div>

<p>Then edit <code>$IXPROOT/.env</code> and set the database options:</p>
<div class="highlight"><pre><span></span>DB_HOST=localhost
DB_DATABASE=ixp
DB_USERNAME=ixp
DB_PASSWORD=password
</pre></div>

<p>Now create the database schema:</p>
<div class="highlight"><pre><span></span>php artisan doctrine:schema:create
</pre></div>

<p>Some older scripts still rely on MySQL view tables. Create these with:</p>
<div class="highlight"><pre><span></span>mysql -u ixp -p ixp &lt; <span class="nv">$IXPROOT</span>/tools/sql/views.sql
</pre></div>

<h3 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link"></a></h3>
<p>Edit <code>$IXPROOT/.env</code> and review and set/change all parameters. Hopefully this is mostly documented or clear but please start a discussion on the mailing list if you have difficultly and we'll update this and the example file's documentation as appropriate.</p>
<h3 id="initial-database-objects">Initial Database Objects<a class="headerlink" href="#initial-database-objects" title="Permanent link"></a></h3>
<p>Using the settings you edited in <code>.env</code> we'll create some database objects. [Yes, a setup wizard needs to be built!].</p>
<p>First let's create the password for the admin user. The following will create a secure random password and hash it with bcrypt:</p>
<div class="highlight"><pre><span></span><span class="nv">USERNAME</span><span class="o">=</span>admin
<span class="nv">USEREMAIL</span><span class="o">=</span>your@email.address
<span class="nv">IXPM_ADMIN_PW</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span> openssl rand -base64 <span class="m">12</span> <span class="k">)</span><span class="s2">&quot;</span>
<span class="nv">ADMIN_PW_SALT</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span> openssl rand -base64 <span class="m">16</span> <span class="k">)</span><span class="s2">&quot;</span>
<span class="nv">HASH_PW</span><span class="o">=</span><span class="k">$(</span> php -r <span class="s2">&quot;echo escapeshellarg( crypt( &#39;</span><span class="si">${</span><span class="nv">IXPM_ADMIN_PW</span><span class="si">}</span><span class="s2">&#39;, sprintf( &#39;\$2a\$%02d\$%s&#39;, 10, substr( &#39;</span><span class="si">${</span><span class="nv">ADMIN_PW_SALT</span><span class="si">}</span><span class="s2">&#39;, 0, 22 ) ) ) );&quot;</span> <span class="k">)</span>
<span class="nb">echo</span> Your password is: <span class="nv">$IXPM_ADMIN_PW</span>
</pre></div>

<p>The following is taken from the IXP Manager installation script:</p>
<div class="highlight"><pre><span></span><span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="s2">&quot;-p${MYSQL_ROOT_PW}&quot;</span> <span class="err">$</span><span class="n">DBNAME</span> <span class="o">&lt;&lt;</span><span class="n">END_SQL</span>
<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nf">ixp</span> <span class="p">(</span> <span class="n">name</span><span class="p">,</span> <span class="n">shortname</span><span class="p">,</span> <span class="n">address1</span><span class="p">,</span> <span class="n">country</span> <span class="p">)</span>
    <span class="k">VALUES</span> <span class="p">(</span> <span class="s1">&#39;${IXPNAME}&#39;</span><span class="p">,</span> <span class="s1">&#39;${IXPSNAME}&#39;</span><span class="p">,</span> <span class="s1">&#39;${IXPCITY}&#39;</span><span class="p">,</span> <span class="s1">&#39;${IXPCOUNTRY}&#39;</span> <span class="p">);</span>
<span class="kt">SET</span> <span class="o">@</span><span class="n">ixpid</span> <span class="o">=</span> <span class="nf">LAST_INSERT_ID</span><span class="p">();</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nf">infrastructure</span> <span class="p">(</span> <span class="n">ixp_id</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">shortname</span><span class="p">,</span> <span class="n">isPrimary</span> <span class="p">)</span>
    <span class="k">VALUES</span> <span class="p">(</span> <span class="o">@</span><span class="n">ixpid</span><span class="p">,</span> <span class="s1">&#39;Infrastructure #1&#39;</span><span class="p">,</span> <span class="s1">&#39;#1&#39;</span><span class="p">,</span> <span class="mi">1</span> <span class="p">);</span>
<span class="kt">SET</span> <span class="o">@</span><span class="n">infraid</span> <span class="o">=</span> <span class="nf">LAST_INSERT_ID</span><span class="p">();</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nf">company_registration_detail</span> <span class="p">(</span> <span class="n">registeredName</span> <span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span> <span class="s1">&#39;${IXPNAME}&#39;</span> <span class="p">);</span>
<span class="kt">SET</span> <span class="o">@</span><span class="n">crdid</span> <span class="o">=</span> <span class="nf">LAST_INSERT_ID</span><span class="p">();</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nf">company_billing_detail</span> <span class="p">(</span> <span class="n">billingContactName</span><span class="p">,</span> <span class="n">invoiceMethod</span><span class="p">,</span> <span class="n">billingFrequency</span> <span class="p">)</span>
    <span class="k">VALUES</span> <span class="p">(</span> <span class="s1">&#39;${NAME}&#39;</span><span class="p">,</span> <span class="s1">&#39;EMAIL&#39;</span><span class="p">,</span> <span class="s1">&#39;NOBILLING&#39;</span> <span class="p">);</span>
<span class="kt">SET</span> <span class="o">@</span><span class="n">cbdid</span> <span class="o">=</span> <span class="nf">LAST_INSERT_ID</span><span class="p">();</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nf">cust</span> <span class="p">(</span> <span class="n">name</span><span class="p">,</span> <span class="n">shortname</span><span class="p">,</span> <span class="n">type</span><span class="p">,</span> <span class="n">abbreviatedName</span><span class="p">,</span> <span class="n">autsys</span><span class="p">,</span> <span class="n">maxprefixes</span><span class="p">,</span> <span class="n">peeringemail</span><span class="p">,</span> <span class="n">nocphone</span><span class="p">,</span> <span class="n">noc24hphone</span><span class="p">,</span>
        <span class="n">nocemail</span><span class="p">,</span> <span class="n">nochours</span><span class="p">,</span> <span class="n">nocwww</span><span class="p">,</span> <span class="n">peeringpolicy</span><span class="p">,</span> <span class="n">corpwww</span><span class="p">,</span> <span class="n">datejoin</span><span class="p">,</span> <span class="n">status</span><span class="p">,</span> <span class="n">activepeeringmatrix</span><span class="p">,</span> <span class="n">isReseller</span><span class="p">,</span>
        <span class="n">company_registered_detail_id</span><span class="p">,</span> <span class="n">company_billing_details_id</span> <span class="p">)</span>
    <span class="k">VALUES</span> <span class="p">(</span> <span class="s1">&#39;${IXPNAME}&#39;</span><span class="p">,</span> <span class="s1">&#39;${IXPSNAME}&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;${IXPSNAME}&#39;</span><span class="p">,</span> <span class="s1">&#39;${IXPASN}&#39;</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="s1">&#39;${IXPPEEREMAIL}&#39;</span><span class="p">,</span> <span class="s1">&#39;${IXPNOCPHONE}&#39;</span><span class="p">,</span>
        <span class="s1">&#39;${IXPNOCPHONE}&#39;</span><span class="p">,</span> <span class="s1">&#39;${IXPNOCEMAIL}&#39;</span><span class="p">,</span> <span class="s1">&#39;24x7&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;mandatory&#39;</span><span class="p">,</span> <span class="s1">&#39;${IXPWWW}&#39;</span><span class="p">,</span> <span class="nf">NOW</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">@</span><span class="n">crdid</span><span class="p">,</span> <span class="o">@</span><span class="n">cbdid</span> <span class="p">);</span>
<span class="kt">SET</span> <span class="o">@</span><span class="n">custid</span> <span class="o">=</span> <span class="nf">LAST_INSERT_ID</span><span class="p">();</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nf">customer_to_ixp</span> <span class="p">(</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">ixp_id</span> <span class="p">)</span> <span class="k">VALUES</span> <span class="p">(</span> <span class="o">@</span><span class="n">custid</span><span class="p">,</span> <span class="o">@</span><span class="n">ixpid</span> <span class="p">);</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nf">user</span> <span class="p">(</span> <span class="n">custid</span><span class="p">,</span> <span class="n">username</span><span class="p">,</span> <span class="n">password</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">privs</span><span class="p">,</span> <span class="n">disabled</span><span class="p">,</span> <span class="n">created</span> <span class="p">)</span>
    <span class="k">VALUES</span> <span class="p">(</span> <span class="o">@</span><span class="n">custid</span><span class="p">,</span> <span class="s1">&#39;${USERNAME}&#39;</span><span class="p">,</span> <span class="err">${</span><span class="n">HASH_PW</span><span class="err">}</span><span class="p">,</span> <span class="s1">&#39;${USEREMAIL}&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nf">NOW</span><span class="p">()</span> <span class="p">);</span>
<span class="kt">SET</span> <span class="o">@</span><span class="n">userid</span> <span class="o">=</span> <span class="nf">LAST_INSERT_ID</span><span class="p">();</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nf">customer_to_users</span> <span class="p">(</span> <span class="n">customer_id</span><span class="p">,</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">privs</span><span class="p">,</span> <span class="n">created_at</span> <span class="p">)</span>
    <span class="k">VALUES</span> <span class="p">(</span> <span class="o">@</span><span class="n">custid</span><span class="p">,</span> <span class="o">@</span><span class="n">userid</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="nf">NOW</span><span class="p">()</span> <span class="p">);</span>

<span class="k">INSERT</span> <span class="k">INTO</span> <span class="nf">contact</span> <span class="p">(</span> <span class="n">custid</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">email</span><span class="p">,</span> <span class="n">created</span> <span class="p">)</span>
    <span class="k">VALUES</span> <span class="p">(</span> <span class="o">@</span><span class="n">custid</span><span class="p">,</span> <span class="s1">&#39;${NAME}&#39;</span><span class="p">,</span> <span class="s1">&#39;${USEREMAIL}&#39;</span><span class="p">,</span> <span class="nf">NOW</span><span class="p">()</span> <span class="p">);</span>
<span class="n">END_SQL</span>
</pre></div>

<p>And finally seed the database:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$IXPROOT</span>
php artisan db:seed --class<span class="o">=</span>IRRDBs
php artisan db:seed --class<span class="o">=</span>Vendors
php artisan db:seed --class<span class="o">=</span>ContactGroups
</pre></div>

<h2 id="file-permissions">File Permissions<a class="headerlink" href="#file-permissions" title="Permanent link"></a></h2>
<p>The web server needs write access to some directories:</p>
<div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$IXPROOT</span>
chown -R www-data: var/ storage/ bootstrap/cache/ database/Proxies/
chmod -R u+rwX var/ storage/ bootstrap/cache/ database/Proxies/
</pre></div>

<h2 id="setting-up-apache">Setting Up Apache<a class="headerlink" href="#setting-up-apache" title="Permanent link"></a></h2>
<p>Here is a sample virtual hosts file for IXP Manager (replace <code>{$IXPROOT}</code> as appropriate!):</p>
<div class="highlight"><pre><span></span><span class="nt">&lt;VirtualHost</span> <span class="s">*:80</span><span class="nt">&gt;</span>
    <span class="nb">ServerAdmin</span> webmaster@localhost
    <span class="nb">DocumentRoot</span> ${IXPROOT}/public
    <span class="nt">&lt;Directory</span> <span class="s">${IXPROOT}/public</span><span class="nt">&gt;</span>
        <span class="nb">Options</span> FollowSymLinks
        <span class="nb">AllowOverride</span> <span class="k">None</span>
        <span class="nb">Require</span> <span class="k">all</span> granted
        <span class="nb">RewriteEngine</span> <span class="k">On</span>
        <span class="nb">RewriteCond</span> %{REQUEST_FILENAME} -s [OR]
        <span class="nb">RewriteCond</span> %{REQUEST_FILENAME} -l [OR]
        <span class="nb">RewriteCond</span> %{REQUEST_FILENAME} -d
        <span class="nb">RewriteRule</span> ^.*$ - [NC,L]
        <span class="nb">RewriteRule</span> ^.*$ <span class="sx">/index.php</span> [NC,L]
    <span class="nt">&lt;/Directory&gt;</span>
    <span class="nb">ErrorLog</span> \${APACHE_LOG_DIR}/error.log
    <span class="nb">CustomLog</span> \${APACHE_LOG_DIR}/access.log combined
<span class="nt">&lt;/VirtualHost&gt;</span>
</pre></div>

<p>You also need to enable rewrite:</p>
<div class="highlight"><pre><span></span>a2enmod rewrite
service apache2 restart
</pre></div>

<h1 id="congratulations">Congratulations!<a class="headerlink" href="#congratulations" title="Permanent link"></a></h1>
<p>Your new IXP Manager installation should be accessible via your server's IP address using the username (<code>$USERNAME</code>) and password (<code>$IXPM_ADMIN_PW</code>) you set above.</p>
<p>If you plan to use this in production, you should:</p>
<ul>
<li>secure your server with an iptables firewall</li>
<li>install an SSL certificate and redirect HTTP access to HTTPS</li>
<li>complete the installation of the many features of IXP Manager such as route server generation, member stats, peer to peer graphs, etc.</li>
<li>PLEASE TELL US! We'd like to add you to the users list at http://www.ixpmanager.org/users.php - just drop us an email to <code>operations &lt;at&gt; inex &lt;dot&gt; ie</code>.</li>
</ul>
<p><strong>What next? See our <a href="../next-steps/">post-install / next steps document here</a>.</strong></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../upgrading/" class="btn btn-neutral float-right" title="Upgrading">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../maint-mode/" class="btn btn-neutral" title="Maintenance Mode"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>&copy; 2017-2019, Internet Neutral Exchange Association Company Limited by Guarantee (INEX).<br><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by-sa/4.0/80x15.png" /></a>&nbsp;This work is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/inex/ixp-manager-docs-md/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../maint-mode/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../upgrading/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
